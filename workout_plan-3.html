<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Workout Tracker App</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 10px; background-color: #f4f4f4; }
        h1, h2 { text-align: center; }
        .day-selector { display: flex; justify-content: space-around; flex-wrap: wrap; margin-bottom: 20px; }
        .day-button { padding: 10px 20px; background-color: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; margin: 5px; }
        .day-button.active { background-color: #0056b3; }
        .exercise { background-color: white; padding: 15px; margin-bottom: 15px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .exercise h3 { margin-top: 0; }
        .sets { margin-top: 10px; }
        .set { display: flex; align-items: center; margin-bottom: 10px; }
        .set input { width: 60px; margin-right: 10px; padding: 5px; }
        .set button { padding: 5px 10px; background-color: #28a745; color: white; border: none; border-radius: 3px; cursor: pointer; }
        .set button.done { background-color: #6c757d; }
        .add-set { background-color: #ffc107; color: black; }
        .timer { margin-left: 10px; }
        .timer button { background-color: #17a2b8; color: white; }
        .export { text-align: center; margin-top: 20px; }
        .export button { padding: 10px 20px; background-color: #dc3545; color: white; border: none; border-radius: 5px; cursor: pointer; }
        textarea { width: 100%; height: 200px; margin-top: 10px; }
        .hidden { display: none; }
    </style>
</head>
<body>
    <h1>Workout Tracker</h1>
    <div class="day-selector">
        <button class="day-button" data-day="monday">Monday: Upper</button>
        <button class="day-button" data-day="tuesday">Tuesday: Lower</button>
        <button class="day-button" data-day="wednesday">Wednesday: Push</button>
        <button class="day-button" data-day="thursday">Thursday: Pull</button>
        <button class="day-button" data-day="friday">Friday: Legs</button>
        <button class="day-button" data-day="saturday">Saturday: Murph</button>
        <button class="day-button" data-day="sunday">Sunday: 5k Run</button>
    </div>
    <div id="workout-content"></div>
    <div class="export">
        <button id="finish-workout">Finish Workout & Export</button>
        <textarea id="export-text" class="hidden"></textarea>
    </div>

    <script>
        const workoutPlan = {
            monday: [
                { name: 'Machine Chest Press (Myo-reps)', warmUp: '2-3', working: 2, reps: '6-8', rpe: '8-9', rest: '2-3 min', subs: ['Bench Press', 'Flat Dumbbell Press'], note: 'Focus on chest activation; increase weight if RPE <8.' },
                { name: 'Supported T-Bar Row (Lengthened Partials)', warmUp: '2-3', working: 2, reps: '6-8', rpe: '7-8', rest: '2-3 min', subs: ['Barbell Row', 'Dumbbell Row'], note: 'Keep back straight; log RPE for overload.' },
                { name: 'Dumbbell Lateral Raise (Lengthened Partials)', warmUp: '0-1', working: 2, reps: '6-8', rpe: '8-9', rest: '30 sec', subs: ['Cable Lateral Raise'], note: 'Superset with Lat Pulldown; slow eccentric.' },
                { name: 'Lat Pulldown', warmUp: '1-2', working: 2, reps: '8-10', rpe: '7-8', rest: '30 sec', subs: ['Pull-Up'], note: 'Full range for back development.' },
                { name: 'Pec Deck (Droplet)', warmUp: '0-1', working: 2, reps: '8-10', rpe: '8-9', rest: '1-2 min', subs: ['Dumbbell Fly'], note: 'Slow eccentric; drop weight if reps drop.' },
                { name: 'Preacher Curl (Droplet)', warmUp: '0-1', working: 2, reps: '8-10', rpe: '8-9', rest: '30 sec', subs: ['Biceps Curl'], note: 'Superset with Skullcrusher.' },
                { name: 'EZ-Bar Skullcrusher (Droplet)', warmUp: '0-1', working: 2, reps: '8-10', rpe: '8-9', rest: '30 sec', subs: ['Overhead Triceps Extension'], note: 'Controlled motion to avoid elbow strain.' }
            ],
            tuesday: [
                { name: 'Barbell Romanian Deadlift', warmUp: '2-3', working: 3, reps: '8-10', rpe: '6-7', rest: '2-3 min', subs: ['Dumbbell Romanian Deadlift'], note: 'Hinge at hips; increase if RPE <7.' },
                { name: 'Leg Press', warmUp: '2-3', working: 3, reps: '6-8', rpe: '7-8', rest: '2-3 min', subs: ['Hack Squat'], note: 'Full depth for quads.' },
                { name: 'Glute Ham Raise (Lengthened Set)', warmUp: '1-2', working: 2, reps: '8-10', rpe: '7-8', rest: '2-3 min', subs: ['Lying Leg Curl'], note: 'Squeeze glutes at top.' },
                { name: 'Seated Calf Raise', warmUp: '0-1', working: 3, reps: '8-10', rpe: '8-9', rest: '30 sec', subs: ['Standing Calf Raise'], note: 'Superset with Cable Crunch.' },
                { name: 'Cable Crunch', warmUp: '0-1', working: 3, reps: '10-12', rpe: '8-9', rest: '30 sec', subs: ['Decline Sit-Up'], note: 'Controlled reps for abs.' }
            ],
            wednesday: [
                { name: 'Cable Upright Row', warmUp: '2-3', working: 3, reps: '8-10', rpe: '7-8', rest: '2-3 min', subs: ['Dumbbell Shoulder Press'], note: 'Controlled motion.' },
                { name: 'Flat Dumbbell Press', warmUp: '1-2', working: 3, reps: '10-12', rpe: '7-8', rest: '2-3 min', subs: ['Bench Press'], note: 'Full chest stretch.' },
                { name: 'Lateral Raise', warmUp: '0-1', working: 3, reps: '12-15', rpe: '8-9', rest: '1-2 min', subs: ['Machine Lateral Raise'], note: 'Slow negatives.' },
                { name: 'Cable Fly', warmUp: '0-1', working: 3, reps: '12-15', rpe: '8-9', rest: '1-2 min', subs: ['Dumbbell Fly'], note: 'Focus on pec contraction.' },
                { name: 'Overhead Triceps Extension', warmUp: '0-1', working: 3, reps: '15-20', rpe: '8-9', rest: '1-2 min', subs: ['EZ-Bar Skullcrusher'], note: 'Elbow alignment.' }
            ],
            thursday: [
                { name: 'Lat Pulldown (Lengthened Partials)', warmUp: '1-2', working: 3, reps: '10-12', rpe: '7-8', rest: '2-3 min', subs: ['Pull-Up'], note: 'Full range.' },
                { name: 'Dumbbell Row', warmUp: '1-2', working: 3, reps: '10-12', rpe: '7-8', rest: '2-3 min', subs: ['T-Bar Row'], note: 'Squeeze back.' },
                { name: 'Cable Lat Pull-In', warmUp: '0-1', working: 3, reps: '12-15', rpe: '8-9', rest: '1-2 min', subs: ['Reverse Pec Deck'], note: 'Rear delt focus.' },
                { name: 'Reverse Pec Deck', warmUp: '0-1', working: 3, reps: '12-15', rpe: '8-9', rest: '1-2 min', subs: ['Face Pull'], note: 'High reps for burn.' },
                { name: 'Biceps Curl', warmUp: '0-1', working: 3, reps: '15-20', rpe: '8-9', rest: '1-2 min', subs: ['Preacher Curl'], note: 'Controlled eccentric.' }
            ],
            friday: [
                { name: 'Hack Squat', warmUp: '2-3', working: 3, reps: '8-10', rpe: '7-8', rest: '2-3 min', subs: ['Leg Press'], note: 'Deep stance.' },
                { name: 'Leg Extension (Lengthened Set)', warmUp: '1-2', working: 2, reps: '12-15', rpe: '7-8', rest: '1-2 min', subs: ['Goblet Squat'], note: 'Quad burn.' },
                { name: 'Seated Leg Curl (Lengthened Set)', warmUp: '1-2', working: 2, reps: '12-15', rpe: '7-8', rest: '1-2 min', subs: ['Lying Leg Curl'], note: 'Hamstring squeeze.' },
                { name: 'Standing Calf Raise', warmUp: '0-1', working: 3, reps: '15-20', rpe: '8-9', rest: '30 sec', subs: ['Seated Calf Raise'], note: 'Superset with Leg Raise.' },
                { name: 'Roman Chair Leg Raise', warmUp: '0-1', working: 3, reps: '10-20', rpe: '8-9', rest: '30 sec', subs: ['Hanging Leg Raise'], note: 'Core engagement.' }
            ],
            saturday: [
                { name: '1-Mile Run', warmUp: '0', working: 1, reps: '1 mile', rpe: 'varies', rest: 'no rest', subs: [], note: 'Pace yourself for partitions.' },
                { name: 'Pull-Ups', warmUp: '0', working: 1, reps: '100 reps partitioned', rpe: 'varies', rest: 'no rest', subs: [], note: 'Partition in 5-10 reps.' },
                { name: 'Push-Ups', warmUp: '0', working: 1, reps: '200 reps partitioned', rpe: 'varies', rest: 'no rest', subs: [], note: 'Keep form tight.' },
                { name: 'Squats', warmUp: '0', working: 1, reps: '300 reps partitioned', rpe: 'varies', rest: 'no rest', subs: [], note: 'Bodyweight air squats.' },
                { name: '1-Mile Run', warmUp: '0', working: 1, reps: '1 mile', rpe: 'varies', rest: 'no rest', subs: [], note: 'Finish strong.' }
            ],
            sunday: [
                { name: '5k Run', warmUp: '0', working: 1, reps: '5k', rpe: 'moderate (5-6)', rest: 'no rest', subs: [], note: 'Moderate pace, add intervals if energy allows.' }
            ]
        };

        const notesRecommendations = `
Warm-Up: Start each session with 5 minutes of light cardio (e.g., treadmill walk) and dynamic stretches (e.g., arm circles, leg swings).

Progression: Increase weight by 2.5-5% when Last Set RPE ≤8 and reps are completed, as per your plan's intent. Log weights/reps in a notebook or app to track.

Rest Periods: Adhere to 30-90 seconds as specified—short rests on supersets enhance metabolic stress for hypertrophy.

Substitutions: Use alternatives (e.g., Dumbbell Press for Bench Press) if equipment is unavailable, especially during travel.

Recovery: With no rest days, monitor fatigue—your family stress (kids, marriage) increases cortisol risk. Ashwagandha (600 mg/day) and omega-3 (1500 mg EPA/DHA) help; add 10-minute meditation daily.

Nutrition: Maintain 180-220 g protein, cycle carbs (200 g on U/P/L days, 150 g on Murph/5k), and 2,300-2,500 cal. HMB (3 g/day, 1 g pre, 1 g post, 1 g dinner) supports growth—buy from Canadian Protein.
        `;

        let currentDay = 'monday';
        let workoutData = loadData();

        function loadData() {
            const saved = localStorage.getItem('workoutData');
            return saved ? JSON.parse(saved) : {};
        }

        function saveData() {
            localStorage.setItem('workoutData', JSON.stringify(workoutData));
        }

        function renderWorkout(day) {
            currentDay = day;
            const content = document.getElementById('workout-content');
            content.innerHTML = '';
            document.querySelectorAll('.day-button').forEach(btn => btn.classList.remove('active'));
            document.querySelector(`[data-day="${day}"]`).classList.add('active');

            const exercises = workoutPlan[day];
            exercises.forEach((ex, exIndex) => {
                const exDiv = document.createElement('div');
                exDiv.className = 'exercise';
                exDiv.innerHTML = `
                    <h3>${ex.name}</h3>
                    <p><strong>Reps:</strong> ${ex.reps} | <strong>RPE:</strong> ${ex.rpe} | <strong>Rest:</strong> ${ex.rest}</p>
                    <p><strong>Substitutions:</strong> ${ex.subs.join(', ') || 'None'}</p>
                    <p><strong>Note:</strong> ${ex.note}</p>
                    <div class="sets">
                        <h4>Warm-Up Sets (${ex.warmUp})</h4>
                        <div id="warmup-sets-${exIndex}"></div>
                        <button class="add-set" onclick="addSet(${exIndex}, 'warmup')">Add Warm-Up Set</button>
                        <h4>Working Sets (${ex.working})</h4>
                        <div id="working-sets-${exIndex}"></div>
                        <button class="add-set" onclick="addSet(${exIndex}, 'working')">Add Working Set</button>
                    </div>
                `;
                content.appendChild(exDiv);
            });

            const notesDiv = document.createElement('div');
            notesDiv.className = 'exercise';
            notesDiv.innerHTML = `<h3>Notes and Recommendations</h3><pre>${notesRecommendations}</pre>`;
            content.appendChild(notesDiv);

            // Render existing sets
            if (!workoutData[day]) workoutData[day] = [];
            exercises.forEach((_, exIndex) => {
                if (!workoutData[day][exIndex]) workoutData[day][exIndex] = { warmup: [], working: [] };
                renderSets(exIndex, 'warmup');
                renderSets(exIndex, 'working');
            });
        }

        function addSet(exIndex, type) {
            const ex = workoutPlan[currentDay][exIndex];
            const sets = workoutData[currentDay][exIndex][type];
            const rangeStr = type === 'warmup' ? ex.warmUp : ex.working.toString();
            const [min, max] = rangeStr.split('-').map(Number);
            const maxSets = max || min;

            if (sets.length < maxSets) {
                let newSet = { weight: '', reps: '', done: false };
                if (sets.length > 0) {
                    const lastSet = sets[sets.length - 1];
                    newSet.weight = lastSet.weight;
                    newSet.reps = lastSet.reps;
                }
                sets.push(newSet);
                renderSets(exIndex, type);
                saveData();
            }
        }

        function renderSets(exIndex, type) {
            const container = document.getElementById(`${type}-sets-${exIndex}`);
            container.innerHTML = '';
            const sets = workoutData[currentDay][exIndex][type];
            sets.forEach((set, setIndex) => {
                const setDiv = document.createElement('div');
                setDiv.className = 'set';
                setDiv.innerHTML = `
                    <input type="number" placeholder="Weight" value="${set.weight}" oninput="updateSet(${exIndex}, '${type}', ${setIndex}, 'weight', this.value)">
                    <input type="number" placeholder="Reps" value="${set.reps}" oninput="updateSet(${exIndex}, '${type}', ${setIndex}, 'reps', this.value)">
                    <button class="${set.done ? 'done' : ''}" onclick="toggleDone(${exIndex}, '${type}', ${setIndex})">${set.done ? 'Undo' : 'Done'}</button>
                    <div class="timer">
                        <button onclick="startTimer(${exIndex}, ${setIndex}, '${type}')">Start Rest Timer</button>
                        <span id="timer-${type}-${exIndex}-${setIndex}"></span>
                    </div>
                `;
                container.appendChild(setDiv);
            });
        }

        function updateSet(exIndex, type, setIndex, field, value) {
            workoutData[currentDay][exIndex][type][setIndex][field] = value;
            saveData();
        }

        function toggleDone(exIndex, type, setIndex) {
            const set = workoutData[currentDay][exIndex][type][setIndex];
            set.done = !set.done;
            renderSets(exIndex, type);
            saveData();
        }

        function startTimer(exIndex, setIndex, type) {
            const ex = workoutPlan[currentDay][exIndex];
            const rest = ex.rest;
            if (rest === 'no rest' || rest === 'varies') return; // Skip if no rest

            // Parse rest time, assume min if range
            let time = parseInt(rest.split('-')[0]) * 60; // in seconds, take min
            if (rest.includes('sec')) time = parseInt(rest.split('-')[0]);
            const timerSpan = document.getElementById(`timer-${type}-${exIndex}-${setIndex}`);
            const interval = setInterval(() => {
                timerSpan.textContent = `${Math.floor(time / 60)}:${time % 60 < 10 ? '0' : ''}${time % 60}`;
                if (time <= 0) {
                    clearInterval(interval);
                    timerSpan.textContent = 'Rest Over!';
                }
                time--;
            }, 1000);
        }

        function exportWorkout() {
            let text = `Workout Day: ${currentDay.charAt(0).toUpperCase() + currentDay.slice(1)}\n\n`;
            workoutPlan[currentDay].forEach((ex, exIndex) => {
                text += `${ex.name}\n`;
                const data = workoutData[currentDay][exIndex];
                if (data.warmup.length > 0) {
                    text += 'Warm-Up Sets:\n';
                    data.warmup.forEach((set, i) => text += `Set ${i+1}: ${set.weight} x ${set.reps} ${set.done ? '(Done)' : ''}\n`);
                }
                if (data.working.length > 0) {
                    text += 'Working Sets:\n';
                    data.working.forEach((set, i) => text += `Set ${i+1}: ${set.weight} x ${set.reps} ${set.done ? '(Done)' : ''}\n`);
                }
                text += '\n';
            });
            const textarea = document.getElementById('export-text');
            textarea.value = text;
            textarea.classList.remove('hidden');
            // Optional: copy to clipboard
            textarea.select();
            document.execCommand('copy');
            alert('Exported to text! Copied to clipboard.');
            // Reset data if desired
            // workoutData[currentDay] = [];
            // saveData();
            // renderWorkout(currentDay);
        }

        document.querySelectorAll('.day-button').forEach(btn => {
            btn.addEventListener('click', () => renderWorkout(btn.dataset.day));
        });

        document.getElementById('finish-workout').addEventListener('click', exportWorkout);

        // Initial render
        renderWorkout('monday');
    </script>
</body>
</html>
